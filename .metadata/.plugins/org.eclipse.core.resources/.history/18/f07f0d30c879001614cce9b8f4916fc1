version: '2'
services:
# Backend  
  gaunt-backend:
   ports:
     - "8080:8080"
   env_file:
     - common.env
     - common-apache-ace-vars.env
     - common-services-db-vars.env
     - ace-target-tenants-services-db-vars.env
   extra_hosts:
     - conxdb-internal-hostname:192.168.15.112
   depends_on:
     - conx-db-multitenant-postgres93
   labels:
     - "interlock.hostname=tenantdbservices"
     - "interlock.domain=myconxclouddev.com"     
   network_mode: "bridge"
   image: conxadmin/apache-ace-conx-target
# Platform DB services  
  ace-target-platform-services-db:
   ports:
     - "8181:8080" 
   env_file:
     - common.env
     - common-apache-ace-vars.env
     - common-services-db-vars.env
     - ace-target-platform-services-db-vars.env
   extra_hosts:
     - conxdb-internal-hostname:192.168.15.112
   depends_on:
     - conx-db-platform-postgres93    
   labels:
     - "interlock.hostname=dbservices"
     - "interlock.domain=myconxclouddev.com"
   network_mode: "bridge"
   image: conxadmin/apache-ace-conx-target
# PostgreSQL DB - multitenants
  conx-db-multitenant-postgres93:
   env_file:
     - common.env
     - common-db-vars.env
   ports:
     - '5433:5432'
   network_mode: "bridge"
   image: 'conxadmin/postgresql-conx-db-server93:latest'
# PostgreSQL DB - platform
  conx-db-platform-postgres93:
   env_file:
     - common.env
     - common-db-vars.env
   ports:
     - '5432:5432'
   network_mode: "bridge"
   image: 'conxadmin/postgresql-conx-db-server93:latest'